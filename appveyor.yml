version: 0.3.{build}
pull_requests:
  do_not_increment_build_number: true
branches:
  only:
  - master
skip_tags: true
image: Visual Studio 2017
build_script:
- pwsh: '& ".\build.ps1"'
test_script:
- dotnet test .\src\JournalCli.Tests\JournalCli.Tests.csproj -c Release
deploy_script:
- pwsh: Publish-Module -NuGetApiKey $env:psgallery -Path .\publish\JournalCli
environment:
  psgallery:
    secure: Hlkt9LvEqlXZk4TY5rlpVj6fiSeLV7nmMwV4mjAinWphJUUeR6ZhIaYT0/L31YF/